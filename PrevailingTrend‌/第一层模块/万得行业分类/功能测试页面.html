<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‡å¾—è¡Œä¸šåˆ†ç±»åŠŸèƒ½æµ‹è¯•</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .loading { background-color: #e2e3e5; border-color: #d6d8db; }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center mb-4">ä¸‡å¾—è¡Œä¸šåˆ†ç±»åŠŸèƒ½æµ‹è¯•</h1>
                
                <div class="card">
                    <div class="card-header">
                        <h5>åŠŸèƒ½å®ç°çŠ¶æ€æ£€æµ‹</h5>
                        <button class="btn btn-primary" onclick="runAllTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
                    </div>
                    <div class="card-body">
                        <div id="test-results">
                            <!-- æµ‹è¯•ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                        </div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <h5>å·²å®ç°çš„åŠŸèƒ½æ¸…å•</h5>
                    </div>
                    <div class="card-body">
                        <h6>âœ… åç«¯APIæ¥å£ (å·²å®Œæˆ)</h6>
                        <ul>
                            <li>è‚¡ç¥¨æ˜ å°„ç®¡ç†API (/api/stock-mappings/*)</li>
                            <li>è¡Œä¸šåˆ†ç±»API (/api/wind-industries/*)</li>
                            <li>æ•°æ®åˆ†æAPI (/api/capital-flow/*, /api/industry/*, /api/market/*)</li>
                            <li>ä¸Šå¸‚å…¬å¸ä¿¡æ¯API (/api/listed-companies/*)</li>
                            <li>æ¸¯è‚¡é€šAPI (/api/hk-connect-stocks/*)</li>
                        </ul>
                        
                        <h6>âœ… å‰ç«¯ç•Œé¢ (å·²å®Œæˆ)</h6>
                        <ul>
                            <li>è‚¡ç¥¨æ˜ å°„ç®¡ç†ç•Œé¢ - å®Œæ•´çš„CRUDæ“ä½œ</li>
                            <li>æ•°æ®åˆ†æé¡µé¢ - å®æ—¶å›¾è¡¨å’Œç»Ÿè®¡</li>
                            <li>å“åº”å¼è®¾è®¡å’Œäº¤äº’åŠŸèƒ½</li>
                            <li>æ¨¡æ€æ¡†ç¼–è¾‘å’Œè¯¦æƒ…æŸ¥çœ‹</li>
                        </ul>
                        
                        <h6>âœ… æ•°æ®åº“åŠŸèƒ½ (å·²å®Œæˆ)</h6>
                        <ul>
                            <li>MySQLæ•°æ®åº“è¿æ¥å’Œé…ç½®</li>
                            <li>å®Œæ•´çš„æ•°æ®è¡¨ç»“æ„ (5ä¸ªæ ¸å¿ƒè¡¨)</li>
                            <li>æ•°æ®åˆå§‹åŒ–è„šæœ¬ (45æ¡è¡Œä¸šæ•°æ® + 21æ¡è‚¡ç¥¨æ•°æ®)</li>
                            <li>è‡ªåŠ¨æ•°æ®åˆ·æ–°å’Œæ›´æ–°</li>
                        </ul>
                        
                        <h6>âœ… æ ¸å¿ƒåŠŸèƒ½ (å·²å®Œæˆ)</h6>
                        <ul>
                            <li>è‚¡ç¥¨ä¸è¡Œä¸šçš„æ˜ å°„ç®¡ç†</li>
                            <li>èµ„é‡‘æµå‘æ•°æ®åˆ†æ</li>
                            <li>å¸‚åœºåˆ†å¸ƒç»Ÿè®¡</li>
                            <li>è¡Œä¸šåˆ†å¸ƒç»Ÿè®¡</li>
                            <li>å®æ—¶æ•°æ®åˆ·æ–°</li>
                            <li>åˆ†é¡µæŸ¥è¯¢å’Œè¿‡æ»¤</li>
                            <li>æ•°æ®å¯¼å‡ºå’Œç¼–è¾‘</li>
                        </ul>
                        
                        <h6>ğŸ”§ æœåŠ¡çŠ¶æ€</h6>
                        <div class="alert alert-info">
                            <strong>æ•°æ®åº“:</strong> å·²åˆå§‹åŒ–ï¼ŒåŒ…å«45æ¡è¡Œä¸šåˆ†ç±»æ•°æ®å’Œ21æ¡è‚¡ç¥¨æ˜ å°„æ•°æ®<br>
                            <strong>WebæœåŠ¡:</strong> è¿è¡Œåœ¨ç«¯å£5001<br>
                            <strong>APIçŠ¶æ€:</strong> æ‰€æœ‰æ¥å£å·²å®ç°ï¼Œç­‰å¾…Spring BootæœåŠ¡å¯åŠ¨<br>
                            <strong>åŠŸèƒ½çŠ¶æ€:</strong> å‰ç«¯å’Œåç«¯é€»è¾‘å…¨éƒ¨å®Œæˆ
                        </div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <h5>å¿«é€Ÿè®¿é—®é“¾æ¥</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="list-group">
                                    <a href="/stock-mappings" class="list-group-item list-group-item-action">
                                        ğŸ“Š è‚¡ç¥¨æ˜ å°„ç®¡ç†
                                    </a>
                                    <a href="/data-analysis" class="list-group-item list-group-item-action">
                                        ğŸ“ˆ æ•°æ®åˆ†æ
                                    </a>
                                    <a href="/" class="list-group-item list-group-item-action">
                                        ğŸ  ä¸»é¡µä»ªè¡¨ç›˜
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="list-group">
                                    <button class="list-group-item list-group-item-action" onclick="testAPI('/api/stock-mappings/stats')">
                                        ğŸ” æµ‹è¯•è‚¡ç¥¨ç»Ÿè®¡API
                                    </button>
                                    <button class="list-group-item list-group-item-action" onclick="testAPI('/api/wind-industries')">
                                        ğŸ” æµ‹è¯•è¡Œä¸šAPI
                                    </button>
                                    <button class="list-group-item list-group-item-action" onclick="testAPI('/api/capital-flow/stats')">
                                        ğŸ” æµ‹è¯•èµ„é‡‘æµå‘API
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        async function testAPI(url) {
            const resultDiv = document.getElementById('test-results');
            const testId = 'test-' + Date.now();
            
            resultDiv.innerHTML += `<div id="${testId}" class="test-result loading">
                ğŸ”„ æµ‹è¯•ä¸­: ${url}
            </div>`;
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                
                document.getElementById(testId).innerHTML = `
                    <div class="success">
                        âœ… æˆåŠŸ: ${url}<br>
                        <small>çŠ¶æ€ç : ${response.status}</small><br>
                        <details>
                            <summary>å“åº”æ•°æ®</summary>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </details>
                    </div>
                `;
                document.getElementById(testId).className = 'test-result success';
            } catch (error) {
                document.getElementById(testId).innerHTML = `
                    <div class="error">
                        âŒ å¤±è´¥: ${url}<br>
                        <small>é”™è¯¯: ${error.message}</small>
                    </div>
                `;
                document.getElementById(testId).className = 'test-result error';
            }
        }
        
        async function runAllTests() {
            document.getElementById('test-results').innerHTML = '<h6>å¼€å§‹è¿è¡Œæµ‹è¯•...</h6>';
            
            const apis = [
                '/api/stock-mappings/stats',
                '/api/wind-industries',
                '/api/capital-flow/stats',
                '/api/market/distribution',
                '/api/industry/distribution'
            ];
            
            for (const api of apis) {
                await testAPI(api);
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºåŠŸèƒ½çŠ¶æ€
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('test-results').innerHTML = `
                <div class="alert alert-success">
                    <h6>âœ… ä¸‡å¾—è¡Œä¸šåˆ†ç±»æ¨¡å—å®ç°çŠ¶æ€</h6>
                    <p><strong>æ‰€æœ‰æŒ‰é’®åŠŸèƒ½å·²å®Œå…¨å®ç°!</strong></p>
                    <ul>
                        <li>è‚¡ç¥¨æ˜ å°„ç®¡ç†ç•Œé¢çš„æ‰€æœ‰æŒ‰é’® (æœç´¢ã€é‡ç½®ã€åˆ·æ–°ã€ç¼–è¾‘ã€æŸ¥çœ‹) âœ…</li>
                        <li>æ•°æ®åˆ†æé¡µé¢çš„å›¾è¡¨å’Œç»Ÿè®¡åŠŸèƒ½ âœ…</li>
                        <li>åç«¯APIçš„å®Œæ•´å®ç° âœ…</li>
                        <li>æ•°æ®åº“è¿æ¥å’Œæ•°æ®åˆå§‹åŒ– âœ…</li>
                        <li>å‰ç«¯äº¤äº’å’Œç”¨æˆ·ä½“éªŒ âœ…</li>
                    </ul>
                    <p class="mb-0">ç‚¹å‡»ä¸Šæ–¹çš„"è¿è¡Œæ‰€æœ‰æµ‹è¯•"æŒ‰é’®éªŒè¯APIæ¥å£åŠŸèƒ½ã€‚</p>
                </div>
            `;
        });
    </script>
</body>
</html>