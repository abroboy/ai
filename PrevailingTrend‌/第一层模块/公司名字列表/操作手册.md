# 公司名字列表模块 - 操作手册

## 模块概述
公司名字列表模块是大势所趋风险框架的基础数据层，负责收集、整理和维护所有目标公司的基本信息。这是整个系统的基础数据源，为后续所有模块提供标准化的公司信息。

## 数据来源分析

### 1. 主要数据源
#### A股市场数据源
- **上海证券交易所官网** (http://www.sse.com.cn/)
  - 上市公司列表
  - 公司基本信息
  - 实时更新的上市公司状态

- **深圳证券交易所官网** (http://www.szse.cn/)
  - 主板、中小板、创业板公司列表
  - 公司基本信息

- **东方财富网API** 
  - 股票代码和公司名称对应关系
  - 市值、行业分类等基础信息
  - 数据更新频率高，接口稳定

- **新浪财经API**
  - 股票基础信息
  - 免费接口，数据质量较好

- **腾讯财经API**
  - 股票基础数据
  - 公司简介信息

#### 港股市场数据源
- **香港交易所官网** (https://www.hkex.com.hk/)
  - 港股上市公司列表
  - 公司基本信息

#### 美股市场数据源（如需要）
- **Yahoo Finance API**
- **Alpha Vantage API**

### 2. 付费数据源（推荐）
- **万得Wind终端**
  - 最权威的中国金融数据源
  - 公司基础信息完整准确
  - 实时更新，数据质量最高
  - 提供API接口

- **同花顺iFinD**
  - 综合金融数据平台
  - 公司基础信息和行业分类
  - API接口稳定

- **聚源数据**
  - 专业金融数据服务商
  - 公司基础信息数据

### 3. 免费数据源
- **Tushare**
  - 免费的中国股市数据接口
  - 提供基础的股票代码和公司名称
  - 适合初期开发和测试

- **AKShare**
  - 开源金融数据接口库
  - 支持多个数据源整合
  - 免费使用，数据覆盖面广

## 数据字段设计

### 核心字段
- **company_name**: 公司全称（标准名称）
- **stock_code**: 股票代码
- **market**: 交易市场（SH/SZ/HK等）
- **short_name**: 股票简称
- **industry_code**: 行业代码（万得分类）
- **list_date**: 上市日期
- **status**: 公司状态（正常/暂停/退市等）

### 扩展字段
- **company_type**: 公司类型（主板/中小板/创业板/科创板等）
- **area**: 地区
- **website**: 公司官网
- **business_scope**: 经营范围
- **market_cap**: 市值
- **employees**: 员工数量

## 数据采集策略

### 1. 数据采集频率
- **全量更新**: 每周一次（周末执行）
- **增量更新**: 每日一次（关注新上市、退市公司）
- **状态检查**: 每日一次（检查公司状态变化）

### 2. 数据质量控制
- **数据验证**: 
  - 股票代码格式验证
  - 公司名称重复检查
  - 上市日期合理性检查
  
- **数据清洗**:
  - 统一公司名称格式
  - 去除特殊字符
  - 标准化行业分类

- **数据补全**:
  - 缺失字段的补全策略
  - 多数据源交叉验证

### 3. 数据存储规范
- **主键设计**: company_name + stock_code 联合主键
- **索引策略**: 
  - stock_code 索引
  - market 索引
  - status 索引
- **数据历史**: 保留数据变更历史记录

## 技术实现方案

### 1. 推荐技术栈
- **Python 3.8+**: 主要开发语言
- **requests**: HTTP请求库
- **pandas**: 数据处理
- **mysql-connector-python**: 数据库连接
- **schedule**: 定时任务
- **logging**: 日志记录

### 2. 核心模块设计
- **数据采集器**: 从各数据源获取数据
- **数据清洗器**: 数据标准化和质量控制
- **数据存储器**: 入库和更新逻辑
- **数据验证器**: 数据完整性检查
- **调度器**: 定时任务管理

### 3. API接口设计
- **获取公司列表**: GET /api/companies
- **搜索公司**: GET /api/companies/search?name=xxx
- **获取公司详情**: GET /api/companies/{code}
- **更新公司信息**: PUT /api/companies/{code}

## 数据源优先级建议

### 生产环境（推荐）
1. **万得Wind** - 最权威，数据质量最高
2. **东方财富** - 免费且稳定的补充数据源
3. **交易所官网** - 官方数据验证

### 开发测试环境
1. **Tushare** - 免费，适合开发测试
2. **AKShare** - 开源，数据源丰富
3. **新浪财经** - 免费API，数据及时

## 注意事项

### 1. 法律合规
- 遵守各数据源的使用条款
- 控制API调用频率，避免被限制
- 注意数据版权问题

### 2. 技术风险
- 数据源稳定性风险
- API接口变更风险
- 网络连接稳定性

### 3. 数据质量
- 多数据源交叉验证
- 建立数据质量监控机制
- 及时处理数据异常

## 实施计划

### 第一阶段：基础框架（1-2天）
1. 建立数据库表结构
2. 实现基础的数据采集框架
3. 对接1-2个免费数据源

### 第二阶段：数据质量（2-3天）
1. 实现数据清洗和验证逻辑
2. 建立多数据源整合机制
3. 完善错误处理和日志记录

### 第三阶段：生产优化（2-3天）
1. 对接付费数据源（如万得）
2. 实现定时任务和监控
3. 建立数据质量报告

### 第四阶段：接口服务（1-2天）
1. 实现API接口
2. 建立数据服务
3. 性能优化和测试

## 成功指标
- 数据覆盖率 > 95%（A股全市场）
- 数据准确率 > 99%
- 数据更新及时性 < 1天
- 系统稳定性 > 99%
