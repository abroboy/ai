# å…¬å¸åå­—åˆ—è¡¨æ¨¡å— - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ðŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### å‰ç½®æ¡ä»¶
- Python 3.8+ å·²å®‰è£…
- MySQL æ•°æ®åº“å·²è¿è¡Œ
- ç½‘ç»œè¿žæŽ¥æ­£å¸¸

### æ­¥éª¤1ï¼šçŽ¯å¢ƒå‡†å¤‡ (2åˆ†é’Ÿ)
```bash
# 1. è¿›å…¥æ¨¡å—ç›®å½•
cd "ç¬¬ä¸€å±‚æ¨¡å—/å…¬å¸åå­—åˆ—è¡¨"

# 2. åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python -m venv venv

# 3. æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/Mac:
# source venv/bin/activate

# 4. å®‰è£…ä¾èµ–ï¼ˆæœ€å°åŒ–å®‰è£…ï¼‰
pip install akshare pandas requests mysql-connector-python schedule
```

### æ­¥éª¤2ï¼šæ•°æ®åº“åˆå§‹åŒ– (1åˆ†é’Ÿ)
```bash
# 1. è¿›å…¥æ•°æ®åº“é…ç½®ç›®å½•
cd "../../æ•°æ®åº“é…ç½®"

# 2. åˆå§‹åŒ–æ•°æ®åº“è¡¨
python database_config.py

# 3. åˆ›å»ºæ•°æ®è¡¨
python init_tables.py
```

### æ­¥éª¤3ï¼šæµ‹è¯•æ•°æ®é‡‡é›† (2åˆ†é’Ÿ)
```bash
# 1. å›žåˆ°æ¨¡å—ç›®å½•
cd "../ç¬¬ä¸€å±‚æ¨¡å—/å…¬å¸åå­—åˆ—è¡¨"

# 2. æµ‹è¯•AKShareæ•°æ®æº
python -c "import akshare as ak; print('AKShareæµ‹è¯•:'); print(ak.stock_zh_a_spot_em().head())"

# 3. è¿è¡Œæ•°æ®é‡‡é›†ï¼ˆæ ¹æ®å®žæ–½æŒ‡å—ä¸­çš„ä»£ç ï¼‰
# é¦–å…ˆéœ€è¦åˆ›å»º company_collector.py æ–‡ä»¶
```

## ðŸ“ å¿…éœ€çš„æ–‡ä»¶

### æ ¸å¿ƒæ–‡ä»¶æ¸…å•
- `config.py` âœ… (å·²åˆ›å»º)
- `requirements_free.txt` âœ… (å·²åˆ›å»º)
- `å…è´¹æ•°æ®æºå®žæ–½æŒ‡å—.md` âœ… (å·²åˆ›å»º)
- `company_collector.py` (éœ€è¦æ ¹æ®æŒ‡å—åˆ›å»º)
- `scheduler.py` (å¯é€‰ï¼Œç”¨äºŽå®šæ—¶ä»»åŠ¡)
- `validate_data.py` (å¯é€‰ï¼Œç”¨äºŽæ•°æ®éªŒè¯)

### åˆ›å»ºæ ¸å¿ƒæ–‡ä»¶çš„å‘½ä»¤
```bash
# åˆ›å»ºæ•°æ®é‡‡é›†å™¨æ–‡ä»¶ï¼ˆä»Žå®žæ–½æŒ‡å—ä¸­å¤åˆ¶ä»£ç ï¼‰
# æ–‡ä»¶: company_collector.py

# åˆ›å»ºè°ƒåº¦å™¨æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
# æ–‡ä»¶: scheduler.py

# åˆ›å»ºéªŒè¯è„šæœ¬ï¼ˆå¯é€‰ï¼‰
# æ–‡ä»¶: validate_data.py
```

## ðŸƒâ€â™‚ï¸ ä¸€é”®è¿è¡Œè„šæœ¬

### Windowsæ‰¹å¤„ç†è„šæœ¬ (run.bat)
```batch
@echo off
echo å¯åŠ¨å…¬å¸æ•°æ®é‡‡é›†ç³»ç»Ÿ...

REM æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
call venv\Scripts\activate

REM æ£€æŸ¥ä¾èµ–
python -c "import akshare, pandas, requests, mysql.connector; print('ä¾èµ–åŒ…æ£€æŸ¥é€šè¿‡')" || (
    echo æ­£åœ¨å®‰è£…ä¾èµ–...
    pip install akshare pandas requests mysql-connector-python schedule
)

REM è¿è¡Œæ•°æ®é‡‡é›†
echo å¼€å§‹æ•°æ®é‡‡é›†...
python company_collector.py

REM éªŒè¯æ•°æ®
echo éªŒè¯é‡‡é›†æ•°æ®...
python validate_data.py

echo ä»»åŠ¡å®Œæˆï¼
pause
```

### Linux/Macè„šæœ¬ (run.sh)
```bash
#!/bin/bash
echo "å¯åŠ¨å…¬å¸æ•°æ®é‡‡é›†ç³»ç»Ÿ..."

# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
source venv/bin/activate

# æ£€æŸ¥ä¾èµ–
python -c "import akshare, pandas, requests, mysql.connector; print('ä¾èµ–åŒ…æ£€æŸ¥é€šè¿‡')" || {
    echo "æ­£åœ¨å®‰è£…ä¾èµ–..."
    pip install akshare pandas requests mysql-connector-python schedule
}

# è¿è¡Œæ•°æ®é‡‡é›†
echo "å¼€å§‹æ•°æ®é‡‡é›†..."
python company_collector.py

# éªŒè¯æ•°æ®
echo "éªŒè¯é‡‡é›†æ•°æ®..."
python validate_data.py

echo "ä»»åŠ¡å®Œæˆï¼"
```

## ðŸ”§ æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. æ¨¡å—å¯¼å…¥é”™è¯¯
```bash
# é”™è¯¯: ModuleNotFoundError: No module named 'akshare'
# è§£å†³: æ£€æŸ¥è™šæ‹ŸçŽ¯å¢ƒæ˜¯å¦æ¿€æ´»
venv\Scripts\activate
pip install akshare
```

#### 2. æ•°æ®åº“è¿žæŽ¥å¤±è´¥
```bash
# é”™è¯¯: Can't connect to MySQL server
# è§£å†³: æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
net start mysql  # Windows
# sudo systemctl start mysql  # Linux
```

#### 3. ç½‘ç»œè¿žæŽ¥é—®é¢˜
```bash
# é”™è¯¯: Network timeout
# è§£å†³: æ£€æŸ¥ç½‘ç»œè¿žæŽ¥ï¼Œæˆ–ä½¿ç”¨å›½å†…é•œåƒ
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple akshare
```

#### 4. æ•°æ®æºè®¿é—®é™åˆ¶
```bash
# é”™è¯¯: API rate limit exceeded
# è§£å†³: è°ƒæ•´è¯·æ±‚é¢‘çŽ‡
# åœ¨config.pyä¸­é™ä½Žrate_limitå€¼
```

## ðŸ“Š éªŒè¯æˆåŠŸæ ‡å‡†

### æ•°æ®é‡‡é›†æˆåŠŸçš„æ ‡å¿—
1. **æ—¥å¿—æ˜¾ç¤ºæ— é”™è¯¯**: æŸ¥çœ‹company_collector.logæ–‡ä»¶
2. **æ•°æ®åº“æœ‰æ•°æ®**: è¿è¡Œ `SELECT COUNT(*) FROM company_list`
3. **æ•°æ®è´¨é‡æ­£å¸¸**: Aè‚¡å…¬å¸æ•°é‡åœ¨4000-5000ä¹‹é—´
4. **å­—æ®µå®Œæ•´**: å…¬å¸åç§°ã€è‚¡ç¥¨ä»£ç ä¸ä¸ºç©º

### æ£€æŸ¥å‘½ä»¤
```sql
-- è¿žæŽ¥MySQLæ•°æ®åº“
mysql -u root -p

-- ä½¿ç”¨æ•°æ®åº“
USE prevailing_trend;

-- æ£€æŸ¥æ•°æ®æ€»é‡
SELECT COUNT(*) as 'å…¬å¸æ€»æ•°' FROM company_list;

-- æ£€æŸ¥ä»Šæ—¥æ•°æ®
SELECT COUNT(*) as 'ä»Šæ—¥æ•°æ®' FROM company_list WHERE data_date = CURDATE();

-- æ£€æŸ¥å¸‚åœºåˆ†å¸ƒ
SELECT market as 'å¸‚åœº', COUNT(*) as 'æ•°é‡' FROM company_list GROUP BY market;

-- æ£€æŸ¥æ•°æ®æº
SELECT data_source as 'æ•°æ®æº', COUNT(*) as 'æ•°é‡' FROM company_list GROUP BY data_source;
```

## ðŸŽ¯ æ€§èƒ½æœŸæœ›

### æ­£å¸¸è¿è¡ŒæŒ‡æ ‡
- **æ•°æ®é‡‡é›†æ—¶é—´**: 2-5åˆ†é’Ÿï¼ˆå–å†³äºŽç½‘ç»œé€Ÿåº¦ï¼‰
- **æ•°æ®é‡**: 4000+ å®¶Aè‚¡å…¬å¸
- **æˆåŠŸçŽ‡**: >95%
- **å†…å­˜ä½¿ç”¨**: <500MB
- **ç£ç›˜ç©ºé—´**: <100MBï¼ˆå«æ—¥å¿—ï¼‰

### ä¼˜åŒ–å»ºè®®
- **æ‰¹é‡å¤§å°**: å»ºè®®500-1000æ¡/æ‰¹æ¬¡
- **å¹¶å‘æ•°**: å»ºè®®2-4ä¸ªçº¿ç¨‹
- **è¯·æ±‚é—´éš”**: å»ºè®®1-2ç§’/è¯·æ±‚
- **é‡è¯•æ¬¡æ•°**: å»ºè®®2-3æ¬¡

## ðŸ“… ç»´æŠ¤è®¡åˆ’

### æ—¥å¸¸ç»´æŠ¤
- **æ¯æ—¥**: æ£€æŸ¥æ•°æ®é‡‡é›†æ—¥å¿—
- **æ¯å‘¨**: éªŒè¯æ•°æ®è´¨é‡å’Œå®Œæ•´æ€§
- **æ¯æœˆ**: æ¸…ç†è€æ—§æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶

### å‡çº§è·¯å¾„
1. **å…è´¹æ–¹æ¡ˆ**: AKShare + ä¸œæ–¹è´¢å¯Œ
2. **è¿›é˜¶æ–¹æ¡ˆ**: æ·»åŠ Tushareå…è´¹ç‰ˆ
3. **ä¸“ä¸šæ–¹æ¡ˆ**: å‡çº§åˆ°Tushare Proæˆ–Wind API

## ðŸ†˜ æŠ€æœ¯æ”¯æŒ

### èŽ·å–å¸®åŠ©
1. **æŸ¥çœ‹æ—¥å¿—**: company_collector.log
2. **æ£€æŸ¥é…ç½®**: config.pyä¸­çš„æ•°æ®æºè®¾ç½®
3. **ç½‘ç»œæµ‹è¯•**: pingæ•°æ®æºAPIåœ°å€
4. **æ•°æ®åº“æµ‹è¯•**: æ‰‹åŠ¨è¿žæŽ¥MySQLéªŒè¯

### è”ç³»æ–¹å¼
- æŸ¥çœ‹è¯¦ç»†å®žæ–½æŒ‡å—: `å…è´¹æ•°æ®æºå®žæ–½æŒ‡å—.md`
- å‚è€ƒæ•°æ®æºæ–¹æ¡ˆ: `æ•°æ®æºæŽ¥å…¥æ–¹æ¡ˆ.md`
- é…ç½®å‚æ•°è¯´æ˜Ž: `config.py`

---

**ðŸŽ‰ å‡†å¤‡å°±ç»ªï¼çŽ°åœ¨å¯ä»¥å¼€å§‹æ”¶é›†è‚¡ç¥¨æ•°æ®äº†ï¼**

