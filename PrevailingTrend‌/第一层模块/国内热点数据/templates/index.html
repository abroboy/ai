<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>国内热点数据管理台</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <style>
        /* 内联样式补充 */
        .icon {
            font-size: 1.2rem;
            margin-right: 0.5rem;
        }
        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }
        .error {
            color: #dc3545;
            padding: 1rem;
            background: #f8d7da;
            border-radius: 8px;
            margin: 1rem 0;
        }
        .success {
            color: #155724;
            padding: 1rem;
            background: #d4edda;
            border-radius: 8px;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- 侧边栏 -->
            <div class="col-md-3 col-lg-2 sidebar p-0">
                <div class="sidebar-header">
                    <h4 class="sidebar-title">
                        <span class="icon">📊</span>
                        热点数据管理台
                    </h4>
                </div>
                <nav class="sidebar-nav">
                    <div class="nav-item">
                        <a class="nav-link active" href="#" onclick="showDashboard()">
                            <span class="icon">📈</span> 仪表盘
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" href="#" onclick="showHotspots()">
                            <span class="icon">📋</span> 热点列表
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" href="#" onclick="showStatistics()">
                            <span class="icon">📊</span> 统计分析
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" href="#" onclick="showCollection()">
                            <span class="icon">🔄</span> 数据采集
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" href="#" onclick="showSettings()">
                            <span class="icon">⚙️</span> 系统设置
                        </a>
                    </div>
                </nav>
            </div>

            <!-- 主内容区 -->
            <div class="col-md-9 col-lg-10 main-content p-4">
                <!-- 仪表盘 -->
                <div id="dashboard-content">
                    <div class="top-navbar">
                        <div class="page-title">数据概览</div>
                    </div>

                    <!-- 统计卡片 -->
                    <div class="dashboard-content">
                        <div class="stats-row">
                            <div class="stat-card primary">
                                <div class="stat-icon primary">
                                    <span class="icon">📊</span>
                                </div>
                                <div class="stat-content">
                                    <h3 id="total-hotspots">0</h3>
                                    <p>总热点数</p>
                                </div>
                            </div>
                            <div class="stat-card success">
                                <div class="stat-icon success">
                                    <span class="icon">🔥</span>
                                </div>
                                <div class="stat-content">
                                    <h3 id="avg-heat">0</h3>
                                    <p>平均热度</p>
                                </div>
                            </div>
                            <div class="stat-card warning">
                                <div class="stat-icon warning">
                                    <span class="icon">😊</span>
                                </div>
                                <div class="stat-content">
                                    <h3 id="avg-sentiment">0</h3>
                                    <p>平均情感</p>
                                </div>
                            </div>
                            <div class="stat-card info">
                                <div class="stat-icon info">
                                    <span class="icon">⚡</span>
                                </div>
                                <div class="stat-content">
                                    <h3 id="active-hotspots">0</h3>
                                    <p>活跃热点</p>
                                </div>
                            </div>
                        </div>

                        <!-- 图表区域 -->
                        <div class="charts-row">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h5 class="chart-title">热点类型分布</h5>
                                </div>
                                <div class="chart-body">
                                    <div id="type-chart" class="loading">
                                        <p>加载图表中...</p>
                                    </div>
                                </div>
                            </div>
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h5 class="chart-title">热度级别分布</h5>
                                </div>
                                <div class="chart-body">
                                    <div id="level-chart" class="loading">
                                        <p>加载图表中...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 最新热点 -->
                        <div class="table-section">
                            <div class="table-header">
                                <h5 class="table-title">最新热点</h5>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>标题</th>
                                            <th>类型</th>
                                            <th>来源</th>
                                            <th>热度</th>
                                            <th>情感</th>
                                            <th>状态</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="latest-hotspots">
                                        <tr>
                                            <td colspan="7" class="loading">加载中...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 热点列表 -->
                <div id="hotspots-content" style="display: none;">
                    <div class="top-navbar">
                        <div class="page-title">热点列表</div>
                    </div>

                    <div class="dashboard-content">
                        <!-- 筛选器 -->
                        <div class="table-section" style="margin-bottom: 2rem;">
                            <div class="table-header">
                                <h5 class="table-title">筛选条件</h5>
                            </div>
                            <div style="padding: 1.5rem;">
                                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                    <div>
                                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">类型</label>
                                        <select id="filter-type" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                            <option value="">全部</option>
                                            <option value="news">新闻</option>
                                            <option value="policy">政策</option>
                                            <option value="industry">行业</option>
                                            <option value="company">公司</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">级别</label>
                                        <select id="filter-level" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                            <option value="">全部</option>
                                            <option value="low">低热度</option>
                                            <option value="medium">中等热度</option>
                                            <option value="high">高热度</option>
                                            <option value="very_high">极高热度</option>
                                        </select>
                                    </div>
                                                                            <div>
                                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">来源</label>
                                            <select id="filter-source" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                <option value="">全部</option>
                                                <!-- 新闻媒体 -->
                                                <option value="新浪财经">新浪财经</option>
                                                <option value="东方财富">东方财富</option>
                                                <option value="证券时报">证券时报</option>
                                                <option value="财新网">财新网</option>
                                                <option value="第一财经">第一财经</option>
                                                <option value="21世纪经济报道">21世纪经济报道</option>
                                                <option value="经济观察报">经济观察报</option>
                                                <option value="中国证券报">中国证券报</option>
                                                <option value="上海证券报">上海证券报</option>
                                                <option value="证券日报">证券日报</option>
                                                <option value="金融时报">金融时报</option>
                                                <option value="经济参考报">经济参考报</option>
                                                <option value="中国经营报">中国经营报</option>
                                                <option value="华夏时报">华夏时报</option>
                                                <option value="每日经济新闻">每日经济新闻</option>
                                                <option value="界面新闻">界面新闻</option>
                                                <option value="澎湃新闻">澎湃新闻</option>
                                                <option value="凤凰网财经">凤凰网财经</option>
                                                <option value="腾讯财经">腾讯财经</option>
                                                <option value="网易财经">网易财经</option>
                                                <option value="搜狐财经">搜狐财经</option>
                                                <option value="和讯网">和讯网</option>
                                                <option value="金融界">金融界</option>
                                                <option value="中金在线">中金在线</option>
                                                <option value="全景网">全景网</option>
                                                <option value="证券之星">证券之星</option>
                                                <option value="同花顺">同花顺</option>
                                                <option value="大智慧">大智慧</option>
                                                <option value="万得资讯">万得资讯</option>
                                                <option value="彭博社中文">彭博社中文</option>
                                                <option value="路透社中文">路透社中文</option>
                                                <option value="华尔街日报中文">华尔街日报中文</option>
                                                <!-- 政府部门 -->
                                                <option value="中国政府网">中国政府网</option>
                                                <option value="发改委">发改委</option>
                                                <option value="央行">央行</option>
                                                <option value="证监会">证监会</option>
                                                <option value="银保监会">银保监会</option>
                                                <option value="财政部">财政部</option>
                                                <option value="工信部">工信部</option>
                                                <option value="商务部">商务部</option>
                                                <option value="科技部">科技部</option>
                                                <option value="人社部">人社部</option>
                                                <option value="自然资源部">自然资源部</option>
                                                <option value="生态环境部">生态环境部</option>
                                                <option value="住建部">住建部</option>
                                                <option value="交通运输部">交通运输部</option>
                                                <option value="农业农村部">农业农村部</option>
                                                <option value="文化和旅游部">文化和旅游部</option>
                                                <option value="国家卫健委">国家卫健委</option>
                                                <option value="应急管理部">应急管理部</option>
                                                <option value="人民银行">人民银行</option>
                                                <option value="外汇管理局">外汇管理局</option>
                                                <!-- 行业协会 -->
                                                <option value="中国汽车工业协会">中国汽车工业协会</option>
                                                <option value="中国钢铁工业协会">中国钢铁工业协会</option>
                                                <option value="中国有色金属工业协会">中国有色金属工业协会</option>
                                                <option value="中国石油和化学工业联合会">中国石油和化学工业联合会</option>
                                                <option value="中国机械工业联合会">中国机械工业联合会</option>
                                                <option value="中国轻工业联合会">中国轻工业联合会</option>
                                                <option value="中国纺织工业联合会">中国纺织工业联合会</option>
                                                <option value="中国建筑材料联合会">中国建筑材料联合会</option>
                                                <option value="中国电力企业联合会">中国电力企业联合会</option>
                                                <option value="中国煤炭工业协会">中国煤炭工业协会</option>
                                                <option value="中国电子企业协会">中国电子企业协会</option>
                                                <option value="中国软件行业协会">中国软件行业协会</option>
                                                <option value="中国互联网协会">中国互联网协会</option>
                                                <option value="中国通信企业协会">中国通信企业协会</option>
                                                <option value="中国房地产业协会">中国房地产业协会</option>
                                                <option value="中国银行业协会">中国银行业协会</option>
                                                <option value="中国证券业协会">中国证券业协会</option>
                                                <option value="中国保险行业协会">中国保险行业协会</option>
                                                <option value="中国基金业协会">中国基金业协会</option>
                                                <option value="中国期货业协会">中国期货业协会</option>
                                                <!-- 交易所 -->
                                                <option value="上海证券交易所">上海证券交易所</option>
                                                <option value="深圳证券交易所">深圳证券交易所</option>
                                                <option value="北京证券交易所">北京证券交易所</option>
                                                <option value="中国金融期货交易所">中国金融期货交易所</option>
                                                <option value="上海期货交易所">上海期货交易所</option>
                                                <option value="郑州商品交易所">郑州商品交易所</option>
                                                <option value="大连商品交易所">大连商品交易所</option>
                                                <option value="上海黄金交易所">上海黄金交易所</option>
                                                <option value="全国中小企业股份转让系统">全国中小企业股份转让系统</option>
                                                <option value="中国证券登记结算公司">中国证券登记结算公司</option>
                                            </select>
                                        </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">最小热度</label>
                                        <input type="number" id="filter-min-heat" min="0" max="100" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                    <div style="align-self: end;">
                                        <button class="btn btn-primary" onclick="filterHotspots()">筛选</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 热点表格 -->
                        <div class="table-section">
                            <div class="table-header">
                                <h5 class="table-title">热点数据</h5>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>标题</th>
                                            <th>类型</th>
                                            <th>级别</th>
                                            <th>来源</th>
                                            <th>热度</th>
                                            <th>情感</th>
                                            <th>状态</th>
                                            <th>发布时间</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="hotspots-table">
                                        <tr>
                                            <td colspan="9" class="loading">加载中...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- 分页 -->
                            <div class="pagination" id="pagination">
                                <!-- 动态加载 -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 统计分析 -->
                <div id="statistics-content" style="display: none;">
                    <div class="top-navbar">
                        <div class="page-title">统计分析</div>
                    </div>

                    <div class="dashboard-content">
                        <div class="charts-row">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h5 class="chart-title">关键词统计</h5>
                                </div>
                                <div class="chart-body">
                                    <div id="keywords-chart" class="loading">
                                        <p>加载图表中...</p>
                                    </div>
                                </div>
                            </div>
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h5 class="chart-title">相关公司统计</h5>
                                </div>
                                <div class="chart-body">
                                    <div id="companies-chart" class="loading">
                                        <p>加载图表中...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 数据采集 -->
                <div id="collection-content" style="display: none;">
                    <div class="top-navbar">
                        <div class="page-title">数据采集</div>
                    </div>

                    <div class="dashboard-content">
                        <div class="table-section">
                            <div class="table-header">
                                <h5 class="table-title">采集控制</h5>
                            </div>
                            <div style="padding: 1.5rem;">
                                <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 2rem;">
                                    <button class="btn btn-primary" onclick="startCollection()">
                                        <span class="icon">▶️</span> 开始采集
                                    </button>
                                    <button class="btn btn-secondary" onclick="stopCollection()">
                                        <span class="icon">⏹️</span> 停止采集
                                    </button>
                                    <div class="success" id="collection-status" style="display: none;">
                                        上次采集时间: <span id="last-collection-time">未采集</span>
                                    </div>
                                </div>
                                
                                <div>
                                    <h6 style="margin-bottom: 1rem;">采集日志</h6>
                                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 1rem; height: 300px; overflow-y: auto; background: #f8f9fa;">
                                        <div id="collection-log">
                                            <p class="loading">等待采集...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 系统设置 -->
                <div id="settings-content" style="display: none;">
                    <div class="top-navbar">
                        <div class="page-title">系统设置</div>
                    </div>

                    <div class="dashboard-content">
                        <div class="table-section">
                            <div class="table-header">
                                <h5 class="table-title">配置管理</h5>
                            </div>
                            <div style="padding: 1.5rem;">
                                <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
                                    <div style="flex: 1; min-width: 300px;">
                                        <h6 style="margin-bottom: 1rem;">数据源配置</h6>
                                        <div style="margin-bottom: 1rem;">
                                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                                <input type="checkbox" id="source-sina" checked style="margin: 0;">
                                                新浪财经
                                            </label>
                                        </div>
                                        <div style="margin-bottom: 1rem;">
                                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                                <input type="checkbox" id="source-eastmoney" checked style="margin: 0;">
                                                东方财富
                                            </label>
                                        </div>
                                    </div>
                                    <div style="flex: 1; min-width: 300px;">
                                        <h6 style="margin-bottom: 1rem;">采集设置</h6>
                                        <div style="margin-bottom: 1rem;">
                                            <label style="display: block; margin-bottom: 0.5rem;">采集间隔(分钟)</label>
                                            <input type="number" id="collection-interval" value="5" min="1" max="60" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                                        </div>
                                        <div style="margin-bottom: 1rem;">
                                            <label style="display: block; margin-bottom: 0.5rem;">最大并发数</label>
                                            <input type="number" id="max-concurrent" value="5" min="1" max="10" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="saveSettings()">
                                    <span class="icon">💾</span> 保存设置
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 热点详情模态框 -->
    <div id="hotspotModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1050;">
        <div style="margin: 2rem auto; max-width: 600px; background: white; border-radius: 12px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);">
            <div style="padding: 1.5rem; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center;">
                <h5 style="margin: 0; font-size: 1.125rem; font-weight: 600;">热点详情</h5>
                <button onclick="closeModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
            </div>
            <div id="hotspot-modal-body" style="padding: 1.5rem;">
                <!-- 动态加载 -->
            </div>
            <div style="padding: 1.5rem; border-top: 1px solid #e5e7eb; display: flex; justify-content: flex-end; gap: 0.5rem;">
                <button class="btn btn-secondary" onclick="closeModal()">关闭</button>
                <button class="btn btn-primary" onclick="editHotspot()">编辑</button>
            </div>
        </div>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html> 