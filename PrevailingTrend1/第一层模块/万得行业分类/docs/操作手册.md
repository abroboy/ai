# 万得行业分类模块 - 操作手册

## 模块概述
万得行业分类模块负责获取、维护和管理标准化的行业分类数据，为整个大势所趋风险框架提供统一的行业分类基准。该模块是行业分析和公司归类的重要基础设施。

## 数据来源分析

### 1. 主要数据源
#### 万得Wind行业分类
- **万得Wind数据终端**
  - 最权威的中国行业分类标准
  - 包含申万行业分类、万得行业分类
  - 提供多级行业分类层次
  - 实时更新行业调整信息

- **申万研究行业分类**
  - 申万一级行业分类（28个大类）
  - 申万二级行业分类（104个中类）
  - 申万三级行业分类（228个小类）
  - 行业分类调整历史记录

#### 证监会行业分类
- **中国证监会官网**
  - 上市公司行业分类指引
  - 行业分类标准文件
  - 行业分类调整公告

#### 国际行业分类标准
- **GICS行业分类**（如需要国际对比）
- **ICB行业分类**（如需要）

### 2. 免费数据源
- **Tushare**
  - 提供基础行业分类信息
  - 申万行业分类数据
  - 行业成分股信息

- **AKShare**
  - 行业板块数据
  - 行业概念股信息
  - 行业指数数据

- **东方财富网**
  - 行业板块分类
  - 行业龙头股信息
  - 行业市场表现数据

## 数据字段设计

### 核心字段
- **industry_code**: 行业代码（万得标准）
- **industry_name**: 行业名称
- **industry_level**: 行业层级（1/2/3级）
- **parent_code**: 父级行业代码
- **sw_code**: 申万行业代码
- **csrc_code**: 证监会行业代码
- **status**: 行业状态（有效/无效/合并等）

### 扩展字段
- **industry_desc**: 行业描述
- **major_companies**: 主要公司列表
- **industry_keywords**: 行业关键词
- **update_date**: 数据更新日期
- **source**: 数据来源标识
- **market_cap_total**: 行业总市值
- **company_count**: 行业公司数量

## 数据采集策略

### 1. 数据采集频率
- **行业分类更新**: 每季度一次（跟随万得更新）
- **成分股更新**: 每月一次
- **市场数据更新**: 每日一次（行业市值、公司数量等）
- **新行业监控**: 每周一次

### 2. 数据质量控制
- **分类标准验证**: 
  - 行业代码格式检查
  - 行业层级关系验证
  - 重复行业检查
  
- **数据一致性检查**:
  - 多标准行业映射一致性
  - 历史数据连续性验证
  - 成分股归属验证

- **数据完整性验证**:
  - 行业覆盖完整性
  - 必填字段完整性
  - 关联关系完整性

### 3. 数据存储规范
- **主键设计**: industry_code + industry_level 联合主键
- **索引策略**: 
  - industry_code 索引
  - parent_code 索引
  - industry_level 索引
- **历史数据**: 保留行业分类变更历史

## 技术实现方案

### 1. 推荐技术栈
- **Python 3.8+**: 主要开发语言
- **WindPy**: 万得数据接口
- **tushare**: 免费数据补充
- **akshare**: 行业概念数据
- **requests**: HTTP请求处理
- **pandas**: 数据处理和分析
- **mysql-connector-python**: 数据库连接

### 2. 核心模块设计
- **行业分类获取器**: 从万得获取最新分类
- **多标准映射器**: 建立不同分类标准的映射关系
- **数据更新器**: 处理行业分类变更
- **成分股管理器**: 维护行业成分股关系
- **数据验证器**: 确保数据质量和一致性

### 3. API接口设计
- **获取行业列表**: GET /api/industries?level=1
- **获取行业详情**: GET /api/industries/{code}
- **获取行业成分股**: GET /api/industries/{code}/stocks
- **行业映射查询**: GET /api/industries/mapping?from=sw&to=wind
- **更新行业分类**: PUT /api/industries/{code}

## 行业分类层次结构

### 万得一级行业分类（示例）
```
010000 - 农林牧渔
020000 - 采掘
030000 - 化工
040000 - 钢铁
050000 - 有色金属
060000 - 电子
070000 - 家用电器
080000 - 食品饮料
090000 - 纺织服装
100000 - 轻工制造
...
```

### 申万一级行业分类（28个）
```
801010 - 农林牧渔
801020 - 基础化工
801030 - 钢铁
801040 - 有色金属
801050 - 电子
801080 - 家用电器
801120 - 食品饮料
801130 - 纺织服饰
801140 - 轻工制造
...
```

## 数据源优先级建议

### 生产环境（推荐）
1. **万得Wind** - 最权威的行业分类标准
2. **申万研究** - 市场认可度最高的分类
3. **证监会标准** - 监管要求的官方分类

### 开发测试环境
1. **Tushare** - 免费，覆盖申万分类
2. **AKShare** - 免费，提供行业概念数据
3. **东方财富** - 免费，实时行业表现数据

## 注意事项

### 1. 行业分类变更
- 定期关注万得行业分类调整公告
- 及时更新行业归属关系
- 保留历史分类信息用于回溯分析

### 2. 多标准兼容
- 建立万得、申万、证监会分类的映射关系
- 处理不同标准下的分类差异
- 确保数据一致性

### 3. 数据质量控制
- 验证行业层级关系的逻辑性
- 检查成分股归属的准确性
- 监控数据更新的及时性

## 实施计划

### 第一阶段：基础框架（2-3天）
1. 搭建数据库表结构
2. 实现万得数据接口连接
3. 建立基础的数据采集框架

### 第二阶段：分类标准整合（3-4天）
1. 实现多种行业分类标准的获取
2. 建立分类标准映射关系
3. 实现数据清洗和标准化

### 第三阶段：数据维护（2-3天）
1. 实现行业分类变更处理
2. 建立成分股动态维护机制
3. 完善数据质量监控

### 第四阶段：服务接口（1-2天）
1. 实现RESTful API接口
2. 建立缓存机制提高性能
3. 完善错误处理和日志记录

## 成功指标
- 行业分类覆盖率 > 95%（全市场行业）
- 分类映射准确率 > 99%
- 数据更新及时性 < 1个工作日
- 接口响应时间 < 500ms
- 系统稳定性 > 99.5%

## 维护和监控

### 定期维护任务
- **每季度**: 检查行业分类调整，更新分类标准
- **每月**: 验证成分股归属，处理新上市公司分类
- **每周**: 监控数据质量，检查异常数据
- **每日**: 更新行业市场数据，监控系统运行状态

### 预警机制
- 行业分类数据超过5天未更新
- 发现无法归类的新股票
- 行业映射关系出现冲突
- 数据质量指标低于阈值

该模块为整个风险框架提供稳定、准确的行业分类基础，确保后续分析的准确性和可比性。

