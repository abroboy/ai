# 万得行业分类管理台操作手册

## 概述

万得行业分类管理台是一个基于Web的图形化界面，用于管理和查看行业分类数据。它提供了直观的数据展示、搜索筛选、统计分析等功能，让用户能够方便地管理和监控行业分类模块的运行状态。

## 功能特性

### 1. 仪表板
- **数据概览**: 显示总行业数、总股票数、各层级行业数量等关键指标
- **实时统计**: 提供最新的数据统计信息
- **快速刷新**: 一键刷新统计数据

### 2. 行业管理
- **行业列表**: 展示所有行业分类数据
- **搜索筛选**: 支持按关键词搜索和层级筛选
- **详情查看**: 查看行业详细信息及相关股票

### 3. 数据更新
- **一键更新**: 手动触发数据更新操作
- **状态监控**: 实时显示更新进度和结果
- **错误处理**: 友好的错误提示和处理

### 4. 统计分析
- **数据分布**: 可视化展示行业层级和状态分布
- **趋势分析**: 数据变化趋势图表
- **质量监控**: 数据质量指标展示

## 快速开始

### 1. 环境准备

确保已安装所需的Python包：

```bash
pip install flask flask-cors pymysql
```

### 2. 启动管理台

```bash
# 基本启动
python run_dashboard.py

# 指定端口启动
python run_dashboard.py --port 8080

# 调试模式启动
python run_dashboard.py --debug

# 初始化数据库并启动
python run_dashboard.py --init-db
```

### 3. 访问管理台

打开浏览器，访问：`http://localhost:5001`

## 详细操作指南

### 仪表板操作

1. **查看统计信息**
   - 页面加载时自动显示最新统计数据
   - 点击"刷新数据"按钮更新统计信息

2. **关键指标说明**
   - 总行业数：系统中所有行业分类的数量
   - 总股票数：已映射到行业的股票数量
   - 一级行业：顶级行业分类数量
   - 二级行业：二级行业分类数量

### 行业管理操作

1. **浏览行业列表**
   - 点击左侧导航"行业管理"
   - 查看所有行业的基本信息

2. **搜索行业**
   - 在搜索框中输入关键词（如"电子"、"金融"）
   - 点击"搜索"按钮或按回车键
   - 支持模糊搜索

3. **层级筛选**
   - 使用层级下拉框选择特定层级
   - 可选择一级、二级、三级行业

4. **查看详情**
   - 点击行业行的"查看详情"按钮
   - 查看行业完整信息和相关股票

### 数据更新操作

1. **手动更新**
   - 点击"数据更新"页面
   - 点击"更新数据"按钮
   - 等待更新完成

2. **监控更新状态**
   - 实时显示更新进度
   - 成功或失败状态提示
   - 更新完成后自动刷新仪表板

### 统计分析操作

1. **查看图表**
   - 点击"统计分析"页面
   - 查看行业分布图表
   - 查看状态分布图表

2. **图表说明**
   - 饼图：显示各层级行业数量分布
   - 柱状图：显示行业状态分布

## 数据说明

### 行业数据结构

```json
{
  "industry_code": "010000",
  "industry_name": "农林牧渔",
  "level": 1,
  "status": "active",
  "parent_code": null,
  "created_at": "2025-01-01 00:00:00",
  "updated_at": "2025-01-01 00:00:00"
}
```

### 股票映射结构

```json
{
  "stock_code": "000001.SZ",
  "stock_name": "平安银行",
  "industry_code": "010000",
  "industry_name": "农林牧渔",
  "mapping_status": "confirmed",
  "confidence": 0.95,
  "created_at": "2025-01-01 00:00:00"
}
```

## 常见问题

### Q1: 管理台无法启动
**A**: 检查以下几点：
- Python环境是否正确
- 依赖包是否已安装
- 端口是否被占用
- 数据库连接是否正常

### Q2: 数据显示为空
**A**: 可能的原因：
- 数据库中没有数据
- 数据库连接失败
- 权限不足

### Q3: 搜索功能不工作
**A**: 检查：
- 搜索关键词是否正确
- 网络连接是否正常
- 后端服务是否运行

### Q4: 数据更新失败
**A**: 常见原因：
- 数据源连接失败
- 数据库权限不足
- 网络连接问题

## 故障排除

### 1. 检查日志

查看日志文件获取详细错误信息：

```bash
tail -f logs/industry_classification_$(date +%Y%m%d).log
```

### 2. 数据库连接测试

```python
from utils.database import db_manager
try:
    result = db_manager.execute_query("SELECT 1")
    print("数据库连接正常")
except Exception as e:
    print(f"数据库连接失败: {e}")
```

### 3. API接口测试

```bash
# 测试统计接口
curl http://localhost:5001/api/dashboard/stats

# 测试行业列表接口
curl http://localhost:5001/api/industries
```

## 性能优化

### 1. 数据缓存
- 启用Redis缓存提高响应速度
- 设置合理的缓存过期时间

### 2. 分页加载
- 大量数据使用分页显示
- 避免一次性加载所有数据

### 3. 异步处理
- 数据更新使用异步处理
- 避免阻塞用户界面

## 安全考虑

### 1. 访问控制
- 添加用户认证机制
- 实现基于角色的权限控制

### 2. 数据安全
- 敏感数据加密存储
- 定期备份重要数据

### 3. 网络安全
- 使用HTTPS协议
- 配置防火墙规则

## 扩展功能

### 1. 数据导出
- 支持CSV、Excel格式导出
- 批量数据下载功能

### 2. 数据可视化
- 更多图表类型
- 交互式数据展示

### 3. 监控告警
- 数据异常告警
- 系统状态监控

## 技术支持

如遇到问题，请：

1. 查看日志文件获取错误信息
2. 检查系统配置是否正确
3. 联系技术支持团队

---

*本操作手册基于万得行业分类模块 v1.0.0 编写* 