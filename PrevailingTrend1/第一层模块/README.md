目标：
我需要有个管理台能够访问和查看相关的模块数据结果。
视图需要体现出模块层级，数据流向，数据时间选择。
数据视图要结构清晰，数据可追溯，可以按照某一个公司查看数据在各模块的加工情况。
页面要有交互按钮，例如：点击 "总模块数" 可以看到每个模块的情况，单选某个模块要能看到这个模块的详细数据，最好加工逻辑描述也备注好。
1. 交互要人性化。
2. 导航页总览要有：第一层的所有模块，点击一个模块要进入这个模块的独立页面，并展示这个模块独立的数据。


# 第一层模块 - 数据采集层

## 模块概述

第一层模块是大势所趋风险框架的数据采集层，负责从各种数据源收集、整理和标准化基础数据。该层为整个框架提供可靠、准确、及时的数据基础，是后续分析和决策的重要支撑。

## 模块组成

### 1. 万得行业分类模块
- **功能**: 收集、维护和管理标准化的行业分类数据
- **数据源**: 万得Wind、申万、证监会、GICS、ICB、Tushare、AKShare、东方财富
- **输出**: 行业分类数据、股票行业映射关系

### 2. 公司名字列表模块
- **功能**: 收集、整理和维护所有目标公司的基本信息
- **数据源**: 上交所、深交所、港交所、东方财富、新浪财经、腾讯财经
- **输出**: 公司基础信息、股票代码映射、公司状态信息

### 3. 国内热点数据模块
- **功能**: 收集、分析和处理国内市场的热点信息
- **数据源**: 新闻网站、政策发布平台、市场数据源
- **输出**: 新闻热点、政策热点、市场热点、情感分析结果

### 4. 国外热点数据模块
- **功能**: 收集、分析和处理国外市场的热点信息
- **数据源**: 国际新闻网站、政策发布平台、市场数据源
- **输出**: 国际热点、跨市场分析、汇率影响分析

### 5. 腾讯济安指数模块
- **功能**: 收集、分析和处理腾讯济安指数相关数据
- **数据源**: 腾讯济安指数API、成分股数据
- **输出**: 指数数据、技术指标、风险分析结果

### 6. 雪球等论坛热点数据模块
- **功能**: 收集、分析和处理雪球、东方财富等论坛的热点信息
- **数据源**: 雪球、东方财富论坛、用户讨论
- **输出**: 论坛热点、用户情感、热门话题

### 7. 其他互联网信息模块
- **功能**: 收集、分析和处理其他互联网信息源的数据
- **数据源**: 社交媒体、博客、新闻网站
- **输出**: 综合互联网信息、多源数据整合

## 技术架构

### 统一架构设计

每个模块都采用相同的工程化架构：

```
模块名/
├── __init__.py              # 模块初始化
├── README.md               # 项目说明
├── requirements.txt        # 依赖包列表
├── config.py              # 配置文件
├── main.py                # 主程序入口
├── models/                # 数据模型
│   ├── __init__.py
│   └── xxx_model.py       # 数据模型定义
├── core/                  # 核心业务逻辑
│   ├── __init__.py
│   ├── xxx_collector.py   # 数据采集器
│   ├── xxx_analyzer.py    # 数据分析器
│   └── xxx_manager.py     # 数据管理器
├── api/                   # API接口
│   ├── __init__.py
│   └── xxx_api.py         # RESTful API
├── utils/                 # 工具类
│   ├── __init__.py
│   ├── logger.py          # 日志管理
│   └── database.py        # 数据库管理
└── tests/                 # 测试文件
    ├── __init__.py
    └── test_xxx.py        # 单元测试
```

### 设计模式应用

- **策略模式**: 不同数据源使用不同采集策略
- **工厂模式**: 根据配置创建相应组件
- **单例模式**: 日志管理器确保全局唯一
- **适配器模式**: 统一不同数据源的接口
- **上下文管理器**: 数据库连接自动管理

### 数据流设计

```
数据源 → 采集器 → 验证器 → 分析器 → 管理器 → 数据库
   ↓        ↓        ↓        ↓        ↓        ↓
 原始数据 → 清洗数据 → 验证数据 → 分析数据 → 管理数据 → 存储数据
```

## 数据质量标准

### 1. 完整性
- 数据字段完整，无缺失值
- 数据记录完整，无遗漏
- 数据关系完整，关联正确

### 2. 准确性
- 数据内容准确，无错误
- 数据格式正确，符合规范
- 数据逻辑合理，无矛盾

### 3. 及时性
- 数据更新及时，延迟最小
- 数据采集实时，响应快速
- 数据同步准确，时间一致

### 4. 一致性
- 跨数据源一致性
- 跨时间一致性
- 跨模块一致性

## 部署架构

### 1. 容器化部署
- 每个模块独立容器
- Docker Compose编排
- 健康检查和监控

### 2. 微服务架构
- 模块间松耦合
- 独立扩展和部署
- 服务发现和负载均衡

### 3. 数据存储
- MySQL主数据库
- Redis缓存层
- 分布式文件存储

## 监控和运维

### 1. 系统监控
- CPU、内存、磁盘使用率
- 网络连接和响应时间
- 服务状态和可用性

### 2. 数据监控
- 数据质量指标
- 数据更新频率
- 数据异常检测

### 3. 业务监控
- 采集成功率
- 处理延迟时间
- 错误率和异常

## 快速开始

### 1. 环境准备

```bash
# 克隆项目
git clone <repository_url>
cd 第一层模块

# 创建虚拟环境
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或
venv\Scripts\activate     # Windows
```

### 2. 安装依赖

```bash
# 安装所有模块依赖
for module in */; do
    if [ -f "$module/requirements.txt" ]; then
        echo "Installing dependencies for $module"
        pip install -r "$module/requirements.txt"
    fi
done
```

### 3. 配置数据库

```bash
# 创建数据库
mysql -u root -p -e "CREATE DATABASE prevailing_trend;"

# 初始化表结构
python 万得行业分类/scripts/setup_database.py --action all
python 公司名字列表/scripts/setup_database.py --action all
# ... 其他模块
```

### 4. 启动服务

```bash
# 启动所有模块的API服务
python 万得行业分类/api_server.py --service combined --port 5001 &
python 公司名字列表/api_server.py --service combined --port 5002 &
python 国内热点数据/api_server.py --service combined --port 5003 &
# ... 其他模块
```

### 5. 数据采集

```bash
# 启动数据采集
python 万得行业分类/main.py --action update &
python 公司名字列表/main.py --action update &
python 国内热点数据/main.py --action collect &
# ... 其他模块
```

## API接口

### 统一API设计

每个模块都提供RESTful API接口：

- `GET /api/health` - 健康检查
- `GET /api/statistics` - 统计信息
- `GET /api/data` - 获取数据
- `POST /api/collect` - 触发采集
- `GET /api/search` - 搜索数据

### 接口文档

- 万得行业分类: http://localhost:5001/docs
- 公司名字列表: http://localhost:5002/docs
- 国内热点数据: http://localhost:5003/docs
- 国外热点数据: http://localhost:5004/docs
- 腾讯济安指数: http://localhost:5005/docs
- 雪球等论坛热点数据: http://localhost:5006/docs
- 其他互联网信息: http://localhost:5007/docs

## 开发指南

### 1. 添加新模块

1. 创建模块目录结构
2. 实现数据模型
3. 实现采集器、分析器、管理器
4. 实现API接口
5. 添加测试用例
6. 更新文档

### 2. 扩展现有模块

1. 添加新的数据源
2. 扩展数据模型
3. 增加分析功能
4. 更新API接口
5. 添加测试用例

### 3. 数据集成

1. 定义数据接口
2. 实现数据转换
3. 建立数据映射
4. 验证数据一致性

## 故障排除

### 常见问题

1. **数据采集失败**
   - 检查网络连接
   - 验证数据源配置
   - 查看错误日志

2. **数据质量异常**
   - 检查数据验证规则
   - 验证数据清洗逻辑
   - 查看数据日志

3. **服务异常**
   - 检查服务状态
   - 验证配置参数
   - 查看服务日志

### 性能优化

1. **采集性能**
   - 使用异步采集
   - 实现并发控制
   - 优化网络请求

2. **处理性能**
   - 使用缓存机制
   - 实现批量处理
   - 优化算法效率

3. **存储性能**
   - 使用数据库索引
   - 实现数据分区
   - 优化查询语句

## 贡献指南

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 许可证

本项目采用 MIT 许可证。

## 联系方式

- 项目维护者: PrevailingTrend Team
- 邮箱: team@prevailingtrend.com
- 项目地址: https://github.com/prevailingtrend/framework 